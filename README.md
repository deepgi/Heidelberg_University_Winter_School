# Code instructions:
## Introduction
Program name: program.py
This is a simple code I developed during a short term research fellowsip at Heidelberg University, Germany. I used this code to collect user data for scaling of a point cloud. Basically I was testing efficiency of scaling with help of images as compared to scaling with the help of point cloud. 
Scaling can be done in two ways. First, the user can pick similar points in different images, the distance between which is already known. Second, the user can pick points directly in the point cloud. Both these methods can provide the scaling factor that can be easily used to scale the point cloud. The study compared these two methods by analyzing the errors generated by scaling in order to determine the best scaling approach.

## Packages used
- cv2
- glob
- numpy
- Tkinter
- scipy

## Input required
- Point cloud.las
- Visual SFM camera parameters txt file
- Images used to create the point cloud
- Real world measurements of some object (Eg. length of a window visible in the images)
- Xampp local server for potree web point cloud visualization

## Before running the program, some edits
**NOTE: I would be soon editing the program to automatically ask for these inputs as well**
- Keep all images used for creating the point cloud in a single folder
- You can use even number of images for point picking. Write their index numbers (half in one set, half in another) in line 62
> for i, j in zip([4,10], [12,16]): *here 4,10,12,16 are image indices in the folder starting from zero*
- Enter name of the camera parameter file in line 89
> text_file = open("camera_paramters_file.txt", "r")
- Enter the actual length of the object in line 191
> act_dist=0.985
- Edit the name of the point cloud las file in line 201
> inFile=File("CAM_Dsense - las.las")

## Working Sequesnce
- On running, the program opens up a directory dialog box. Select the folder that contains all the images used for creating the point cloud. 
- Another dialog box would ask for the user name. Please enter the user name and click save. Then close the dialog box.
- Two images will appear side-by-side. Now you need to select the starting and ending point of the object, the real measurement of which is already known.
- To select the points:
> Left click for the staring point

> Right click for the ending point

> Panning with left click is not allowed, this would disrupt the program

> You can use zooming in/out via scroll

> Panning can only be performed using the arrow buttons available on the top of the image windows

> Press escape to close the image

- Finally you would get the scaling factor via image point picking
- A potree link is generated. Click on the link.
- The area of interest in the point cloud is displayed in the potree web-gl in a new tab
- You can now measure the same distance in potree using the distance measurement tool
- This measurement can be saved in Json format
- This distance can be used to calculate the point cloud based scale

## Analysis
- Now we have the scaling factors for both, the image based and point cloud based approaches.
**NOTE: I did the analysis manually, but I would soon be adding automatic analysis in the code**
